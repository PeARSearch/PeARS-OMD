<!--
SPDX-FileCopyrightText: 2022 PeARS Project, <community@pearsproject.org>, 

SPDX-License-Identifier: AGPL-3.0-only
-->

{% extends "base/base.html" %}
{% block body %}

    <div class="container">

        <div  class="row">
            <div class="col-md-6">
            <div  style="border: 1px solid #ccc; border-radius:10px; padding:10px; height:230px">
            <p><b>Crawl a website</b></p>
            <p>Your crawl is in progress. The PeARS spider is recording all links on your chosen website and indexing them. The progress bar on your right
            will show you how many page have been indexed so far.</p>
            <p>Note: the speed of indexing varies as a function of the availability of the page and the speed of your Internet connection.</p>
            <p>Once the progress bar indicates "Finished", you can leave this page and search the pages you have just indexed.</p>
            </div>
            </div>
            <div class="col-md-6">
            <br><br>
            <div class="progress" style="width: 50%; margin: 50px;">
                <div class="progress progress-striped active">
                <div class="progress-bar"  role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
			<span class="progress-bar-label">0</span>
                </div>
                </div>
            </div>

        </div>

    </div><!-- /.container -->


<script>

var source = new EventSource("/indexer/progress_crawl");
source.onmessage = function(event) {
	$('.progress-bar-label').text(event.data);

	if(event.data == 100){
		source.close()
	}
}
</script>
{% endblock %}

